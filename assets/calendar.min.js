!function(f){void 0!==window.jQuery?f.fn.nattreidCalendar=function(e){var t=f(this),a=t.find(".nattreid-calendar").data("handler"),n=t.find(".nattreid-calendar").data("disable-before-current"),d=t.find(".nattreid-calendar").data("offset"),s=[];t.find(".nattreid-calendar .day.selected").each(function(e,a){a=f(a);a.hasClass("hiddenCell")||s.push(a.data("date"))});var r=f.extend({},{onSelected:function(e){}},e);function i(){var a=[];return s.forEach(function(e){e=e.split("-");a.push(new Date(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10)))}),a}function l(){t.find(".nattreid-calendar .spinner").addClass("active"),f.nette.ajax({url:a,data:{nattreidCalendarOffset:d}}).done(function(){s.forEach(function(e){c(e).addClass("selected")});var e=o(s);e&&e.addClass("selection")})}function c(e){return t.find('.nattreid-calendar .day[data-date="'+e+'"]')}function o(e){var a=c(e[0]),n=c(e[1]);return!(n=(n=a.parent().is(n.parent())?a.nextUntil(n):(e=a.closest(".month").nextUntil(n.closest(".month")).find(".day"),a.nextAll().add(e).add(n.prevAll()))).not(".hiddenCell")).hasClass("disabled")&&n}function u(a){t.find(".nattreid-calendar .day").removeClass("selection");var n=[];null!=a?s.forEach(function(e){a.is(c(e))?a.removeClass("selected"):n.push(e)}):s.forEach(function(e){c(e).removeClass("selected")}),s=n}return this.getSelected=i,f(this).on("click",".nattreid-calendar a.prev",function(){return(!n||0<d)&&(--d,l()),!1}),f(this).on("click",".nattreid-calendar a.next",function(){return d++,l(),!1}),f(this).on("click",".nattreid-calendar .day",function(){var e=f(this);e.hasClass("disabled")||(e.hasClass("selected")?u:function(e){var a=e.data("date");switch(s.length){default:case 2:u();case 0:s.push(a),e.addClass("selected");break;case 1:var n=s.slice();n[0]>a?n=[a,n[0]]:n.push(a);a=o(n);a&&(a.addClass("selection"),e.addClass("selected"),s=n),r.onSelected(i())}})(e)}),this}:console.error('Plugin "jQuery" required by "Nattreid/Calendar" is missing!')}(jQuery);